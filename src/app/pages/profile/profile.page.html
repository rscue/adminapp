<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            Perfil
        </h1>
    </section>
    <section class="content">
        <div class="row">
            <div class="col-lg-8">
                <div class="box box-primary">
                    <form class="form-horizontal" #f="ngForm" (ngSubmit)="save(f.valid)" novalidate>
                        <div class="box-header with-border">
                            <h3 class="box-title">Compañia</h3>
                        </div>
                        <div class="box-body">
                            <div class="form-group" [ngClass]="{'has-error': !(name.valid || (name.pristine && !f.submitted))}">
                                <label for="name" class="col-sm-2 control-label">Razón social</label>

                                <div class="col-sm-10">
                                    <input type="text" #name="ngModel" name="name" [(ngModel)]="profile.name" autofocus required minlength="3" maxlength="255"
                                        class="form-control" id="name" placeholder="Razón social">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="email" class="col-sm-2 control-label">Correo electrónico</label>

                                <div class="col-sm-10">
                                    <input type="email" #email="ngModel" name="email" [(ngModel)]="profile.email" disabled class="form-control" id="email" placeholder="Correo electrónico">
                                </div>
                            </div>
                            <div class="form-group" [ngClass]="{'has-error': !(address.valid || (address.pristine && !f.submitted))}">
                                <label for="address" class="col-sm-2 control-label">Dirección</label>

                                <div class="col-sm-10">
                                    <input type="text" #address="ngModel" name="address" [(ngModel)]="profile.address" required minlength="3" maxlength="255"
                                        class="form-control" id="address" placeholder="Dirección">
                                </div>
                            </div>
                            <div class="form-group" [ngClass]="{'has-error': !(zipCode.valid || (zipCode.pristine && !f.submitted))}">
                                <label for="zipCode" class="col-sm-2 control-label">Código postal</label>

                                <div class="col-sm-10">
                                    <input type="text" #zipCode="ngModel" name="zipCode" [(ngModel)]="profile.zipCode" required minlength="3" maxlength="255"
                                        class="form-control" id="zipCode" placeholder="Código postal">
                                </div>
                            </div>
                            <div class="form-group" [ngClass]="{'has-error': !(city.valid || (city.pristine && !f.submitted))}">
                                <label for="city" class="col-sm-2 control-label">Ciudad</label>

                                <div class="col-sm-10">
                                    <input type="text" #city="ngModel" name="city" [(ngModel)]="profile.city" required minlength="3" maxlength="255" class="form-control"
                                        id="city" placeholder="Ciudad">
                                </div>
                            </div>
                            <div class="form-group" [ngClass]="{'has-error': !(state.valid || (state.pristine && !f.submitted))}">
                                <label for="state" class="col-sm-2 control-label">Provincia</label>

                                <div class="col-sm-10">
                                    <select id="state" #state="ngModel" name="state" style="width: 100%" [(ngModel)]="profile.state" required class="form-control select2"
                                        placeholder="Seleccione una provincia">
                                <option *ngFor="let field of states" [value]="field.code">{{field.name}}</option>
                            </select>
                                </div>
                            </div>
                        </div>
                        <div class="box-footer">
                            <button type="button" *ngIf="profile.submitted" disabled class="btn btn-success pull-right"><i class="fa fa-spinner fa-pulse fa-fw"></i></button>
                            <button type="submit" *ngIf="!profile.submitted" class="btn btn-success pull-right">Guardar</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-lg-4" >
                <div class="box box-info">
                    <div class="box-header with-border">
                        <h3 class="box-title">Logo</h3>
                    </div>
                    <div class="box-body text-center">
                        <img src="{{profile.avatarUri}}" #logoImg class="img-circle" alt="User Image">
                    </div>
                    <div class="box-footer text-center">
                        <button (click)="modal.show()" type="button" class="btn btn-primary" >Cambiar</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<app-avatar-modal #avatarModal imageSrc="{{profile.avatarUri}}" (croppedImage)="changeLogo($event)"></app-avatar-modal>
